runtime: ruby30
service: default
env: standard

entrypoint: bundle exec rails server -p $PORT

env_variables:
  DATABASE_USERNAME: ${database_username}
  DATABASE_PASSWORD: "${database_password}"
  DATABASE_HOSTNAME: /cloudsql/${database_connection_name}
  DATABASE_NAME: ${database_name}
  RECAPTCHA_SITE_KEY: ${recaptcha_site_key}
  RECAPTCHA_SECRET_KEY: ${recaptcha_secret_key}
  SECRET_KEY_BASE: ${secret_key_base}

beta_settings:
  cloud_sql_instances: ${database_connection_name}